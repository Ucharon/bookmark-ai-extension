# 首次配置API时返回按钮问题修复

## 任务上下文

在用户首次使用插件，进入配置API页面时，如果用户未完成必要的API配置（尤其是API密钥）就点击返回按钮，会导致用户回到主界面但没有有效的API配置。这种情况下主界面显示空白内容，用户体验不佳。

## 问题分析

1. 在SettingsPanel组件中，返回按钮没有检查API配置是否已完成
2. 点击返回按钮会无条件返回上一个视图，即使是首次配置未完成
3. Popup组件没有区分从普通使用进入设置和从首次配置进入设置的情况

## 执行计划

1. 修改SettingsPanel组件
   - 添加isInitialSetup属性，标识是否为首次配置场景
   - 实现handleBackClick方法，在首次配置未完成时阻止返回
   - 在首次配置未完成时显示友好提示

2. 更新Popup组件
   - 添加previousView状态，记录进入设置前的视图状态
   - 在打开设置页面时记录当前视图
   - 根据previousView决定是否为首次配置
   - 返回时恢复到之前的视图状态

## 执行结果

- 首次配置未完成时，用户点击返回按钮会收到提示，不会返回主界面
- 用户必须完成API配置后才能使用插件功能
- 从正常使用进入设置页面时，可以自由返回而不受限制
- 改善了整体用户体验，防止用户进入无法使用的状态 